# ğŸ¨ DiseÃ±ador Virtual de Cortinas - Especificaciones Completas

## ğŸ¯ OBJETIVO

Crear un mÃ³dulo revolucionario que permita a los clientes **visualizar cÃ³mo quedarÃ¡n las cortinas en su espacio real** usando IA, aumentando la tasa de cierre de ventas del 30-40% al 70-80%.

---

## ğŸ’¡ PROPUESTA DE VALOR

### Para el Cliente:
- âœ… **Ve el resultado antes de comprar** - Elimina incertidumbre
- âœ… **Prueba infinitas opciones** - Sin compromiso
- âœ… **Comparte con familia** - DecisiÃ³n colaborativa
- âœ… **Presupuesto instantÃ¡neo** - Con foto incluida

### Para Ana (Propietaria):
- âœ… **Cierre x2** - Cliente convencido antes de comprar
- âœ… **Ticket medio +50%** - Upselling visual
- âœ… **DiferenciaciÃ³n brutal** - Ãšnica en su zona
- âœ… **Lead generation** - Captura automÃ¡tica de contactos
- âœ… **Viralizable** - Clientes comparten resultados

---

## ğŸ”„ FLUJO COMPLETO DEL USUARIO

### PASO 1: Inicio de Proyecto
```
Usuario entra a "DiseÃ±ador Virtual"
â”œâ”€ Ve galerÃ­a de proyectos anteriores (si tiene)
â”œâ”€ BotÃ³n grande: "Nuevo Proyecto"
â””â”€ Click â†’ Pantalla de upload
```

### PASO 2: Upload de Imagen
```
Pantalla de upload
â”œâ”€ Zona drag & drop (arrastrar foto)
â”œâ”€ Click para seleccionar desde galerÃ­a
â”œâ”€ PrevisualizaciÃ³n inmediata
â””â”€ BotÃ³n "Analizar Espacio"
```

### PASO 3: AnÃ¡lisis con IA (AutomÃ¡tico - 5 segundos)
```
Gemini Vision analiza:
â”œâ”€ Detecta ventanas (ubicaciÃ³n y dimensiones)
â”œâ”€ Identifica estilo decorativo (moderno/clÃ¡sico/rÃºstico)
â”œâ”€ Extrae colores predominantes
â”œâ”€ EvalÃºa nivel de luz natural
â””â”€ Sugiere telas compatibles

Resultado mostrado:
"ğŸ  SalÃ³n moderno de 25mÂ²
ğŸ“ Ventana detectada: 2.5m x 2.0m
ğŸ¨ Colores: Beige, gris claro
ğŸ’¡ Luz natural: Alta
âœ¨ Te recomendamos: Lino, AlgodÃ³n, Seda"
```

### PASO 4: SelecciÃ³n de Opciones
```
Interfaz dividida en 3 secciones:

[IZQUIERDA: Imagen Original]
- Foto del salÃ³n
- Marcadores de ventanas detectadas
- Dimensiones calculadas

[CENTRO: ConfiguraciÃ³n]
ğŸ“¦ CatÃ¡logo de Telas (filtrable)
â”œâ”€ Por categorÃ­a (Telas, Forros)
â”œâ”€ Por opacidad (Transparente/TraslÃºcida/Opaca/Blackout)
â”œâ”€ Por color
â””â”€ Por precio

Cada tela muestra:
- Foto/textura
- Nombre y referencia
- Precio por mÂ²
- CaracterÃ­sticas (opacidad, composiciÃ³n)
- Stock disponible

ğŸ¨ Tipo de Cortina
â˜ Ondas francesas
â˜ Panel japonÃ©s  
â˜ Pliegues rectos
â˜ Estor enrollable

âš™ï¸ Opciones Extra
â˜ Forro tÃ©rmico (+15â‚¬/mÂ²)
â˜ Motorizada (+180â‚¬)
â˜ Doble cortina (capa + blackout)

[DERECHA: Preview en tiempo real]
- CÃ¡lculo de metraje automÃ¡tico
- Precio estimado actualizado en vivo
- BotÃ³n "Generar Visualizaciones"
```

### PASO 5: GeneraciÃ³n con IA (15-20 segundos)
```
IA genera 3 variantes:
1. Luz diurna (luz natural entrando)
2. Atardecer (luz cÃ¡lida)
3. Noche (luz artificial interior)

Cada imagen:
- Fotorrealista
- Cortina integrada naturalmente
- IluminaciÃ³n coherente
- Sombras y pliegues realistas
```

### PASO 6: Comparador Visual
```
GalerÃ­a de resultados:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Original â”‚ Diurna   â”‚ Atardecerâ”‚  Noche   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Funcionalidades:
- Click para ampliar
- Slider antes/despuÃ©s
- BotÃ³n "Me gusta" (marca favorita)
- BotÃ³n "Probar otra tela" (volver atrÃ¡s)
- BotÃ³n "Generar Presupuesto"
```

### PASO 7: Presupuesto AutomÃ¡tico
```
Al hacer click en "Generar Presupuesto":

Sistema calcula:
â”œâ”€ Metraje total (ancho x2.5 x alto + dobladillos)
â”œâ”€ Precio tela (metraje x precio/mÂ²)
â”œâ”€ Accesorios (rieles, ganchos, soportes)
â”œâ”€ ConfecciÃ³n (horas x tarifa)
â”œâ”€ InstalaciÃ³n (complejidad x tarifa)
â””â”€ Total con IVA

PDF generado incluye:
- Foto "antes" y "despuÃ©s"
- Desglose detallado
- CaracterÃ­sticas de la tela
- GarantÃ­a y condiciones
- QR para aprobar online
- Logo Anushka Hogar
```

### PASO 8: Compartir y Guardar
```
Opciones finales:
ğŸ“± Compartir por WhatsApp
   "Â¡Mira cÃ³mo quedarÃ¡n nuestras cortinas! ğŸ˜"
   [Imagen + Link al presupuesto]

ğŸ“§ Enviar por Email
   - A cliente
   - A familiar/pareja para opiniÃ³n
   - Incluye presupuesto adjunto

ğŸ’¾ Guardar Proyecto
   - En galerÃ­a personal
   - Accesible desde cualquier dispositivo
   - Puede editarlo despuÃ©s

âœ… Confirmar y Crear Trabajo
   - Convierte a trabajo real
   - Asigna empleada
   - Programa fecha instalaciÃ³n
```

---

## ğŸ¨ DISEÃ‘O DE LA INTERFAZ

### Estilo Visual:
- **Header:** Degradado morado/azul (como GALI)
- **Cards:** Blancas con sombras suaves
- **Botones principales:** Gradient purpleâ†’blue
- **Botones secundarios:** Gray outline
- **Estados:**
  - Cargando: Spinner con "Analizando con IA..."
  - Ã‰xito: Check verde con mensaje
  - Error: X rojo con retry

### IconografÃ­a:
- ğŸ“· Upload: Icono cÃ¡mara
- ğŸ” AnÃ¡lisis: Icono lupa con IA
- ğŸ¨ Telas: Icono paleta
- âš™ï¸ Opciones: Icono engranaje
- âœ¨ Generar: Icono varita mÃ¡gica
- ğŸ“Š Presupuesto: Icono calculadora
- ğŸ“± Compartir: Icono share

---

## ğŸ¤– INTEGRACIÃ“N DE IAs

### 1. Gemini Vision (AnÃ¡lisis)
**Endpoint:** `POST /api/diseno/analizar`

**Input:**
```json
{
  "image_url": "https://r2.cloudflare.com/...",
  "cliente_id": 123
}
```

**Prompt a Gemini:**
```
Analiza esta imagen de un espacio interior donde se instalarÃ¡n cortinas.

Extrae:
1. Dimensiones aproximadas de ventanas (ancho x alto en metros)
2. Estilo decorativo (moderno/clÃ¡sico/rÃºstico/minimalista/bohemio)
3. Colores predominantes (cÃ³digos hex)
4. Nivel de luz natural (bajo/medio/alto)
5. Materiales existentes (madera/metal/textil)
6. CaracterÃ­sticas especiales (techos altos, ventanales grandes, etc.)

Responde en JSON:
{
  "ventanas": [{
    "ubicacion": "pared frontal",
    "ancho_aprox": 2.5,
    "alto_aprox": 2.0,
    "forma": "rectangular"
  }],
  "estilo": "moderno",
  "colores": ["#F5F5DC", "#36454F"],
  "luz_natural": "alta",
  "materiales": ["madera", "textil"],
  "recomendaciones": ["Lino natural", "AlgodÃ³n"]
}
```

**Output:**
```json
{
  "success": true,
  "analisis": { ... },
  "proyecto_id": 456
}
```

---

### 2. Image Generation (VisualizaciÃ³n)
**Endpoint:** `POST /api/diseno/generar`

**Opciones de IA a usar:**

**OPCIÃ“N A: fal-ai/nano-banana (RECOMENDADO)**
- Mejor para ediciÃ³n de imÃ¡genes existentes
- Inpainting preciso
- Mantiene coherencia con foto original
- RÃ¡pido (15-20s)
- Precio: ~$0.03/imagen

**OPCIÃ“N B: flux-pro/kontext/pro**
- Excelente calidad
- Bueno para mÃºltiples referencias
- MÃ¡s caro pero resultados top
- Precio: ~$0.10/imagen

**Input:**
```json
{
  "proyecto_id": 456,
  "image_url": "https://r2.cloudflare.com/original.jpg",
  "tela": {
    "nombre": "Lino Natural Beige",
    "textura_url": "/static/telas/lino-beige.jpg",
    "color": "#F5F5DC",
    "opacidad": "traslÃºcida"
  },
  "tipo_cortina": "ondas_francesas",
  "iluminacion": "diurna"
}
```

**Prompt para IA:**
```
Edit this interior photo to add curtains to the window.

Curtain specifications:
- Fabric: Linen texture, beige color (#F5F5DC)
- Style: French pleats, hanging from ceiling
- Opacity: Semi-translucent (light filtering)
- Length: Floor-length
- Lighting: Daytime natural light

Requirements:
- Photorealistic integration
- Natural shadows and folds
- Maintain original room details
- Coherent lighting across scene
- Professional interior design quality

DO NOT change anything else in the room.
```

**Output:**
```json
{
  "success": true,
  "imagenes": [
    "https://r2.cloudflare.com/generated-diurna.jpg",
    "https://r2.cloudflare.com/generated-atardecer.jpg",
    "https://r2.cloudflare.com/generated-noche.jpg"
  ],
  "tiempo_generacion": 18.5
}
```

---

## ğŸ“Š BASE DE DATOS

### Tabla: `proyectos_diseno`
```sql
CREATE TABLE proyectos_diseno (
  id INTEGER PRIMARY KEY,
  cliente_id INTEGER,
  nombre_proyecto TEXT,
  imagen_original_url TEXT,
  analisis_ia TEXT, -- JSON
  tela_nombre TEXT,
  tipo_cortina TEXT,
  imagenes_generadas TEXT, -- JSON array
  imagen_seleccionada_url TEXT,
  metraje_calculado REAL,
  precio_total REAL,
  estado TEXT, -- borrador/compartido/presupuestado
  presupuesto_id INTEGER,
  created_at DATETIME
);
```

### Tabla: `catalogo_telas`
```sql
CREATE TABLE catalogo_telas (
  id INTEGER PRIMARY KEY,
  nombre TEXT,
  referencia TEXT UNIQUE,
  categoria_id INTEGER,
  opacidad TEXT,
  color_principal TEXT,
  color_hex TEXT,
  textura TEXT,
  imagen_muestra_url TEXT,
  precio_metro REAL,
  stock_metros REAL,
  veces_usado INTEGER,
  created_at DATETIME
);
```

---

## ğŸ“± RESPONSIVE DESIGN

### Desktop (1920x1080)
- 3 columnas (Original | Config | Preview)
- GalerÃ­a de resultados en grid 2x2
- Comparador lado a lado

### Tablet (768x1024)
- 2 columnas (Original+Config | Preview)
- GalerÃ­a en carousel horizontal
- Comparador apilado

### Mobile (375x667)
- 1 columna vertical
- Steps wizard (paso a paso)
- Swipe entre opciones
- Botones fijos en bottom

---

## ğŸ” PERMISOS Y ACCESO

**Ana Ramos (Propietaria):**
- âœ… Ver todos los proyectos
- âœ… Crear proyectos
- âœ… Editar catÃ¡logo de telas
- âœ… Ver estadÃ­sticas de uso
- âœ… Exportar proyectos

**Tienda (Empleados):**
- âœ… Ver proyectos propios
- âœ… Crear proyectos
- âœ… Ver catÃ¡logo de telas
- âŒ No editar catÃ¡logo
- âŒ No ver estadÃ­sticas globales

---

## ğŸ“ˆ MÃ‰TRICAS Y ANALYTICS

**Tracking automÃ¡tico:**
- Proyectos creados por dÃ­a
- Telas mÃ¡s visualizadas
- Telas mÃ¡s convertidas (proyecto â†’ presupuesto)
- Tiempo medio de decisiÃ³n
- Tasa de conversiÃ³n (proyecto â†’ venta)
- Proyectos compartidos vs no compartidos
- Precio medio de proyectos cerrados

**Dashboard de Ana:**
```
ğŸ“Š DiseÃ±ador Virtual - Ãšltimos 30 dÃ­as

Proyectos creados: 47
Presupuestos generados: 32 (68% conversiÃ³n)
Ventas cerradas: 19 (59% cierre)

ğŸ† Telas Top 3:
1. Lino Natural Beige - 12 ventas
2. Terciopelo Gris - 8 ventas
3. Blackout Gris Perla - 6 ventas

ğŸ’° Ticket medio: â‚¬487 (+â‚¬87 vs sin diseÃ±ador)

ğŸ“± Proyectos compartidos: 38 (81%)
   â””â”€ WhatsApp: 29 (76%)
   â””â”€ Email: 9 (24%)
```

---

## ğŸ’¸ COSTOS OPERATIVOS

### Por Proyecto:
- Gemini Vision (anÃ¡lisis): **GRATIS** (preview hasta mid-2025)
- Image Generation (3 variantes): **â‚¬0.09** ($0.03 x 3)
- Cloudflare R2 Storage: **â‚¬0.001** (negligible)
- **Total por proyecto: ~â‚¬0.10**

### Mensual (estimado 50 proyectos):
- Generaciones: **â‚¬4.50**
- Storage: **â‚¬0.50**
- **Total mensual: â‚¬5.00**

### ROI:
- InversiÃ³n: â‚¬5/mes
- Incremento ticket medio: +â‚¬87/venta
- Ventas extra por mes: +5 (conservador)
- Ingresos adicionales: **+â‚¬435/mes**
- **ROI: 8,700%**

---

## ğŸš€ PLAN DE IMPLEMENTACIÃ“N

### Fase 1: Infraestructura (4 horas)
- âœ… MigraciÃ³n BD creada
- â³ Endpoints API bÃ¡sicos
- â³ Upload a Cloudflare R2
- â³ IntegraciÃ³n Gemini Vision

### Fase 2: Frontend Core (6 horas)
- â³ PestaÃ±a DiseÃ±ador Virtual
- â³ Upload de imÃ¡genes
- â³ CatÃ¡logo de telas
- â³ ConfiguraciÃ³n de opciones

### Fase 3: IA Generativa (4 horas)
- â³ IntegraciÃ³n image generation
- â³ Procesamiento background
- â³ GalerÃ­a de resultados
- â³ Comparador visual

### Fase 4: ConversiÃ³n (3 horas)
- â³ CÃ¡lculo automÃ¡tico de presupuestos
- â³ PDF con foto incluida
- â³ Compartir por WhatsApp/Email
- â³ Guardar en galerÃ­a

### Fase 5: Testing y Docs (3 horas)
- â³ Testing end-to-end
- â³ DocumentaciÃ³n de uso
- â³ Video tutorial para Ana
- â³ Deploy a producciÃ³n

**TOTAL: 20 horas = 2.5 dÃ­as laborables**

---

## ğŸ“ DOCUMENTACIÃ“N PARA ANA

### Manual de Uso:
1. **CÃ³mo crear un proyecto** (con cliente en tienda)
2. **CÃ³mo elegir la mejor tela** (guÃ­a rÃ¡pida)
3. **CÃ³mo interpretar el anÃ¡lisis de IA**
4. **CÃ³mo generar presupuesto desde diseÃ±o**
5. **CÃ³mo compartir con cliente**
6. **CÃ³mo gestionar el catÃ¡logo de telas**
7. **CÃ³mo ver estadÃ­sticas**

### Video Tutorial (5 minutos):
- Caso real: Cliente entra a tienda
- Proceso completo filmado
- Tips de venta durante el proceso
- Cierre de venta con presupuesto visual

---

## ğŸ”® ROADMAP FUTURO (v2.0)

**Mejoras planificadas:**
- [ ] DetecciÃ³n automÃ¡tica de mÃºltiples ventanas
- [ ] GeneraciÃ³n de video (cortina moviÃ©ndose)
- [ ] Realidad Aumentada (AR) en mÃ³vil
- [ ] Recomendador inteligente de telas por estilo
- [ ] IntegraciÃ³n con Instagram (subir directamente)
- [ ] Marketplace de inspiraciÃ³n (galerÃ­a pÃºblica)
- [ ] Comparador de presupuestos (2-3 opciones lado a lado)
- [ ] Calculadora de ahorro energÃ©tico (con forro tÃ©rmico)

---

**Estado:** ğŸ“ Especificaciones completas  
**PrÃ³ximo paso:** Empezar implementaciÃ³n (Fase 1)  
**Tiempo estimado total:** 2.5 dÃ­as  
**Fecha entrega:** 30-31 octubre 2025
